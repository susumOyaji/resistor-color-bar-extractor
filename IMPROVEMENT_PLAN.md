# 抵抗器カラーコード検出の改善案

## 現在の問題
- スキャン解析: 抵抗器の色に強制的に分類するため、実際の色を無視
- Dominant Colors: 実際の色を検出するが、抵抗器の色名に変換しない

## 提案する解決策: ハイブリッドアプローチ

### ステップ1: 実際の色を抽出 (K-means)
- 画像から実際に存在する色を抽出
- 小さなノイズを除去

### ステップ2: 抵抗器カラーコードにマッピング
各抽出色を最も近い抵抗器の色に変換:
```
実際の色 #E1BF05 → Yellow (抵抗器コード: 4)
実際の色 #9A47A0 → Violet (抵抗器コード: 7)
実際の色 #808080 → Gray (抵抗器コード: 8)
```

### ステップ3: 位置と順序から抵抗値を計算
- 左から右への色の順序を保持
- 最も面積の大きい色（ボディ）を除外
- 残った色の順序から抵抗値を計算

### 実装方法
1. `/api/scan` エンドポイントを改善
2. 各スライスで K-means を使用して実際の色を抽出
3. 抽出された色を抵抗器カラーコードにマッピング
4. 既存のロジックで抵抗値を計算

### メリット
✓ 実際の画像の色を正確に検出
✓ 照明条件の変化に強い
✓ 様々な抵抗器メーカーの色のバリエーションに対応
✓ より高い精度
